<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Create equal area polygons over a geographic range — EqualAreaSample • safeHavens</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create equal area polygons over a geographic range — EqualAreaSample"><meta name="description" content="This function creates n geographic clusters over a geographic area (x), typically a species
range, using kmeans clustering."><meta property="og:description" content="This function creates n geographic clusters over a geographic area (x), typically a species
range, using kmeans clustering."><meta property="og:image" content="https://sagesteppe.github.io/safeHavens/logo.png"><!-- Google Search Console Verification --><meta name="google-site-verification" content="viUZcwXk_Fi5hsfdB7m6GgrFgGMJ-xVe1BcMTezGJII"><!-- JSON-LD Structured Data for AI Crawlers --><script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "SoftwareApplication",
  "name": "safeHavens",
  "applicationCategory": "Scientific Software",
  "operatingSystem": "Windows, macOS, Linux",
  "softwareVersion": "0.0.0.9000",
  "description": "R package providing seven sampling schemes for germplasm curators to prioritize field collection efforts for ex situ plant conservation, including species distribution modeling optimized for germplasm sampling.",
  "url": "https://sagesteppe.github.io/safeHavens/",
  "downloadUrl": "https://github.com/sagesteppe/safeHavens",
  "author": {
    "@type": "Person",
    "name": "Reed Benkendorf",
    "url": "https://github.com/sagesteppe"
  },
  "programmingLanguage": "R",
  "keywords": [
    "germplasm conservation",
    "ex situ conservation",
    "plant conservation",
    "sampling design",
    "species distribution model",
    "SDM",
    "biodiversity",
    "seed collection",
    "R package",
    "conservation biology"
  ],
  "inLanguage": "en-US",
  "offers": {
    "@type": "Offer",
    "price": "0",
    "priceCurrency": "USD"
  }
}
</script><!-- Additional SEO Meta Tags --><meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large"><meta name="keywords" content="germplasm conservation, ex situ conservation, plant conservation, sampling design, species distribution model, R package"><meta name="author" content="Reed Benkendorf"><link rel="canonical" href="https://sagesteppe.github.io/safeHavens/"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">safeHavens</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/index.html">Articles</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/sagesteppe/safeHavens/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Create equal area polygons over a geographic range</h1>
      <small class="dont-index">Source: <a href="https://github.com/sagesteppe/safeHavens/blob/main/R/EqualAreaSample.R" class="external-link"><code>R/EqualAreaSample.R</code></a></small>
      <div class="d-none name"><code>EqualAreaSample.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function creates <code>n</code> geographic clusters over a geographic area (<code>x</code>), typically a species
range, using kmeans clustering.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">EqualAreaSample</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  n <span class="op">=</span> <span class="fl">20</span>,</span>
<span>  pts <span class="op">=</span> <span class="fl">5000</span>,</span>
<span>  <span class="va">planar_proj</span>,</span>
<span>  <span class="va">returnProjected</span>,</span>
<span>  reps <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  BS.reps <span class="op">=</span> <span class="fl">9999</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>An SF object or terra spatraster. the range over which to generate the clusters.</p></dd>


<dt id="arg-n">n<a class="anchor" aria-label="anchor" href="#arg-n"></a></dt>
<dd><p>Numeric. the number of clusters desired. Defaults to 20.</p></dd>


<dt id="arg-pts">pts<a class="anchor" aria-label="anchor" href="#arg-pts"></a></dt>
<dd><p>Numeric. the number of points to use for generating the clusters, these will be placed in a grid like fashion across <code>x</code>. The exact number of points used may deviate slightly from the user submitted value to allow for equidistant spacing across <code>x</code>. Defaults to 5,000.</p></dd>


<dt id="arg-planar-proj">planar_proj<a class="anchor" aria-label="anchor" href="#arg-planar-proj"></a></dt>
<dd><p>Numeric, or character vector. An EPSG code, or a proj4 string, for a planar coordinate projection, in meters, for use with the function. For species with very narrow ranges a UTM zone may be best (e.g. 32611 for WGS84 zone 11 north, or 29611 for NAD83 zone 11 north). Otherwise a continental scale projection like 5070 See https://projectionwizard.org/ for more information on CRS. The value is simply passed to sf::st_transform if you need to experiment.</p></dd>


<dt id="arg-returnprojected">returnProjected<a class="anchor" aria-label="anchor" href="#arg-returnprojected"></a></dt>
<dd><p>Boolean. Whether to return the data set in the original input CRS (FALSE), or in the new <code>projection</code> (TRUE). Defaults to FALSE.</p></dd>


<dt id="arg-reps">reps<a class="anchor" aria-label="anchor" href="#arg-reps"></a></dt>
<dd><p>Numeric. The number of times to rerun the voronoi algorithm, the set of polygons with the most similar sizes, as
measured using their variance of areas will be selected. Defaults to 100.</p></dd>


<dt id="arg-bs-reps">BS.reps<a class="anchor" aria-label="anchor" href="#arg-bs-reps"></a></dt>
<dd><p>number of bootstrap replicates for evaluating results.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list containing two objects, the first the results of bootstrap simulations.
The second an sf dataframe containing the polygons with the smallest amount of variance in size.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">nc</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_read.html" class="external-link">st_read</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"shape/nc.shp"</span>, package<span class="op">=</span><span class="st">"sf"</span><span class="op">)</span>, quiet <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">NAME</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">zones</span> <span class="op">&lt;-</span> <span class="fu">EqualAreaSample</span><span class="op">(</span><span class="va">nc</span>, n <span class="op">=</span> <span class="fl">20</span>, pts <span class="op">=</span> <span class="fl">500</span>, planar_proj <span class="op">=</span> <span class="fl">32617</span>, reps <span class="op">=</span> <span class="fl">50</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>did not converge in 10 iterations</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>did not converge in 10 iterations</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>did not converge in 10 iterations</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>did not converge in 10 iterations</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>did not converge in 10 iterations</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    user  system elapsed </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   5.314   0.041   5.356 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">nc</span>, main <span class="op">=</span> <span class="st">'Counties of North Carolina'</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="EqualAreaSample-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">zones</span><span class="op">$</span><span class="va">Geometry</span>, main <span class="op">=</span> <span class="st">'Clusters'</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="EqualAreaSample-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="va">zones</span><span class="op">$</span><span class="va">SummaryData</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                  Metric       Value</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     variance.observed  9507223610</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2        quantile.0.001  9565302650</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3             lwr.95.CI  9507223610</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4             upr.95.CI 10692510134</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    Voronoi.reps.asked          50</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 Voronoi.reps.received          50</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7               BS.reps        9999</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Reed Benkendorf.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

