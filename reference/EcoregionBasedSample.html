<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Determine the sample size for n ecoregions in an area — EcoregionBasedSample • safeHavens</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Determine the sample size for n ecoregions in an area — EcoregionBasedSample"><meta name="description" content="Intersect a vector data file of ecoregions (ecoregions) with the range of a focal taxon (x) and selects n ecoregions to sample.
If fewer than n ecoregions exist in the range of the species, then extra samples are added to the largest ecoregions by their
area proportions to meet n.
This function has adequate support for the official Omernik L4 shapefiles created by the EPA, and has worked with minimal experimentation to other vector data sources.
If more ecoregions exist across the range of the species than n (very common),  select a method to determine how sample sizes (in this instance 1 sample per ecoregion) are selected.
Methods include sampling from the n largest, orsmallest ecoregions by number, or the ecoregion with the most disconnected habitat (measured soley by the number of polygons).
Each of these three methods then returns the largest polygon within the criterion.
A note on 'polygons'.
Simple features are able to store polygon data in two main formats, a 'MULTIPOLYGON', where all individual polygons composing a class are stored collectively, or as 'POLYGONS' where each individual polygon is a unique entry within the class.
'Polygons' are generally used when two areas of the same class are discontinuous,
and an analyst wants to easily analyze them separately.
'MULTIPOLYGONS' are generally created by an analyst interested in understanding properties of the entire class.
The EPA Omernik spatial data set comes with both 'POLYGONS' and 'MULTIPOLYGONS', I have used it somewhat extensively and believe that the creators struck a happy balance between creating too many small polygons, e.g.  for areas like coastal reef island (a MULTIPOLYGON use case), and big polygons.
I do not modify them here, and on rare occasion (essentially islands), what I refer to as a 'polygon' may technically be a multipolygon."><meta property="og:description" content="Intersect a vector data file of ecoregions (ecoregions) with the range of a focal taxon (x) and selects n ecoregions to sample.
If fewer than n ecoregions exist in the range of the species, then extra samples are added to the largest ecoregions by their
area proportions to meet n.
This function has adequate support for the official Omernik L4 shapefiles created by the EPA, and has worked with minimal experimentation to other vector data sources.
If more ecoregions exist across the range of the species than n (very common),  select a method to determine how sample sizes (in this instance 1 sample per ecoregion) are selected.
Methods include sampling from the n largest, orsmallest ecoregions by number, or the ecoregion with the most disconnected habitat (measured soley by the number of polygons).
Each of these three methods then returns the largest polygon within the criterion.
A note on 'polygons'.
Simple features are able to store polygon data in two main formats, a 'MULTIPOLYGON', where all individual polygons composing a class are stored collectively, or as 'POLYGONS' where each individual polygon is a unique entry within the class.
'Polygons' are generally used when two areas of the same class are discontinuous,
and an analyst wants to easily analyze them separately.
'MULTIPOLYGONS' are generally created by an analyst interested in understanding properties of the entire class.
The EPA Omernik spatial data set comes with both 'POLYGONS' and 'MULTIPOLYGONS', I have used it somewhat extensively and believe that the creators struck a happy balance between creating too many small polygons, e.g.  for areas like coastal reef island (a MULTIPOLYGON use case), and big polygons.
I do not modify them here, and on rare occasion (essentially islands), what I refer to as a 'polygon' may technically be a multipolygon."><meta property="og:image" content="https://sagesteppe.github.io/safeHavens/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">safeHavens</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/safeHavens.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Determine the sample size for n ecoregions in an area</h1>

      <div class="d-none name"><code>EcoregionBasedSample.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Intersect a vector data file of ecoregions (<code>ecoregions</code>) with the range of a focal taxon (<code>x</code>) and selects <code>n</code> ecoregions to sample.
If fewer than n ecoregions exist in the range of the species, then extra samples are added to the largest ecoregions by their
area proportions to meet n.</p>
<p>This function has adequate support for the official Omernik L4 shapefiles created by the EPA, and has worked with minimal experimentation to other vector data sources.
If more ecoregions exist across the range of the species than n (very common),  select a method to determine how sample sizes (in this instance 1 sample per ecoregion) are selected.
Methods include sampling from the n largest, orsmallest ecoregions by number, or the ecoregion with the most disconnected habitat (measured soley by the number of polygons).
Each of these three methods then returns the largest polygon within the criterion.</p>
<p>A note on 'polygons'.
Simple features are able to store polygon data in two main formats, a 'MULTIPOLYGON', where all individual polygons composing a class are stored collectively, or as 'POLYGONS' where each individual polygon is a unique entry within the class.
'Polygons' are generally used when two areas of the same class are discontinuous,
and an analyst wants to easily analyze them separately.
'MULTIPOLYGONS' are generally created by an analyst interested in understanding properties of the entire class.
The EPA Omernik spatial data set comes with both 'POLYGONS' and 'MULTIPOLYGONS', I have used it somewhat extensively and believe that the creators struck a happy balance between creating too many small polygons, e.g.  for areas like coastal reef island (a MULTIPOLYGON use case), and big polygons.
I do not modify them here, and on rare occasion (essentially islands), what I refer to as a 'polygon' may technically be a multipolygon.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">EcoregionBasedSample</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">ecoregions</span>,</span>
<span>  <span class="va">OmernikEPA</span>,</span>
<span>  <span class="va">n</span>,</span>
<span>  <span class="va">ecoregion_col</span>,</span>
<span>  <span class="va">increase_method</span>,</span>
<span>  <span class="va">decrease_method</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>a range of species as a simple feature (sf) object.</p></dd>


<dt id="arg-ecoregions">ecoregions<a class="anchor" aria-label="anchor" href="#arg-ecoregions"></a></dt>
<dd><p>An ecoregion vector data file (~shapefile) in sf.</p></dd>


<dt id="arg-omernikepa">OmernikEPA<a class="anchor" aria-label="anchor" href="#arg-omernikepa"></a></dt>
<dd><p>Boolean. TRUE indicates that the data are from the US EPA and minimally modified, if FALSE several more input are required to ensure the function maps over appropriately.
If left blank the default method is to scan for an exact match of the standard Omernik ecoregion field (column) names, and if matched dispatched to the Omernik module, else fail unless the associated columns are specified (SEE BELOW).</p></dd>


<dt id="arg-n">n<a class="anchor" aria-label="anchor" href="#arg-n"></a></dt>
<dd><p>Numeric. desired total number of samples across this range</p></dd>


<dt id="arg-ecoregion-col">ecoregion_col<a class="anchor" aria-label="anchor" href="#arg-ecoregion-col"></a></dt>
<dd><p>Character.
Name of the column contain the finest resolution data which are to be used for the analysis.
For an Omernik L4 file it defaults to the relevant columns automatically, if a different type of file is submitted, and these not specified the function fails.</p></dd>


<dt id="arg-increase-method">increase_method<a class="anchor" aria-label="anchor" href="#arg-increase-method"></a></dt>
<dd><p>Character. Method to implement if the number of L4 ecoregions is
less than n.</p></dd>


<dt id="arg-decrease-method">decrease_method<a class="anchor" aria-label="anchor" href="#arg-decrease-method"></a></dt>
<dd><p>Character. Method to implement if the number of L4 ecoregions is
greater than n.
'Largest' (the default) will select the n largest ecoregions by total area, and then select the largest single polygon within each of these classes.
'Smallest' will select the n smallest ecoregions by total area, and then select the largest single polygon within these classes.
'Most' will select the n ecoregions with the most polygons, and select the largest polygon from each.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An sf object, the same length as the input data set, with only the finest resolution eco level, and geometry fields retained, and a new column 'n' indicating how many accession should be gather from the ecoregion.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># First example is using a subset (and with simplified geometry) Omernik L4</span></span></span>
<span class="r-in"><span><span class="co"># ecoregion shapefile from the EPA. Which as of the time of writing were </span></span></span>
<span class="r-in"><span><span class="co"># available, at no cost, at the following URL</span></span></span>
<span class="r-in"><span><span class="co"># https://www.epa.gov/eco-research/level-iii-and-iv-ecoregions-continental-united-states</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">polygon</span> <span class="op">&lt;-</span> <span class="fu">spData</span><span class="fu">::</span><span class="va"><a href="https://jakubnowosad.com/spData/reference/us_states.html" class="external-link">us_states</a></span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">NAME</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>   <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">NAME</span> <span class="op">==</span> <span class="st">'California'</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>   <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_transform.html" class="external-link">st_transform</a></span><span class="op">(</span><span class="fl">4326</span><span class="op">)</span></span></span>
<span class="r-in"><span>   </span></span>
<span class="r-in"><span><span class="va">Weco</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_read.html" class="external-link">st_read</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span>package<span class="op">=</span><span class="st">"safeHavens"</span><span class="op">)</span>, <span class="st">'extdata'</span>, <span class="st">'WesternEcoregions.gpkg'</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>  quiet <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">Weco</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Simple feature collection with 6 features and 17 fields</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Geometry type: MULTIPOLYGON</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Dimension:     XY</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Bounding box:  xmin: -120.6736 ymin: 36.50122 xmax: -118.0553 ymax: 40.4275</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Geodetic CRS:  WGS 84</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      NA_L2NAME NA_L2CODE                      L3_KEY               NA_L3NAME</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 COLD DESERTS      10.1 13  Central Basin and Range Central Basin and Range</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 COLD DESERTS      10.1 13  Central Basin and Range Central Basin and Range</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 COLD DESERTS      10.1 13  Central Basin and Range Central Basin and Range</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 COLD DESERTS      10.1 13  Central Basin and Range Central Basin and Range</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 COLD DESERTS      10.1 13  Central Basin and Range Central Basin and Range</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 COLD DESERTS      10.1 13  Central Basin and Range Central Basin and Range</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Shape_Leng             L2_KEY US_L3CODE NA_L1CODE NA_L3CODE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   94308.62 10.1  COLD DESERTS        13        10    10.1.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   49617.99 10.1  COLD DESERTS        13        10    10.1.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 2106033.22 10.1  COLD DESERTS        13        10    10.1.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  165631.31 10.1  COLD DESERTS        13        10    10.1.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  510158.56 10.1  COLD DESERTS        13        10    10.1.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6   87086.56 10.1  COLD DESERTS        13        10    10.1.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                NA_L1NAME                                          US_L4NAME</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 NORTH AMERICAN DESERTS Sierra Nevada-Influenced Semiarid Hills and Basins</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 NORTH AMERICAN DESERTS Sierra Nevada-Influenced Semiarid Hills and Basins</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 NORTH AMERICAN DESERTS Sierra Nevada-Influenced Semiarid Hills and Basins</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 NORTH AMERICAN DESERTS                                      Sierra Valley</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 NORTH AMERICAN DESERTS                                 Upper Owens Valley</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 NORTH AMERICAN DESERTS                                 Mono-Adobe Valleys</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 US_L3NAME</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Central Basin and Range</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 Central Basin and Range</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 Central Basin and Range</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 Central Basin and Range</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 Central Basin and Range</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 Central Basin and Range</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                     L4_KEY US_L4CODE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 13aa  Sierra Nevada-Influenced Semiarid Hills and Basins      13aa</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 13aa  Sierra Nevada-Influenced Semiarid Hills and Basins      13aa</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 13aa  Sierra Nevada-Influenced Semiarid Hills and Basins      13aa</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4                                      13ab  Sierra Valley      13ab</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5                                 13ac  Upper Owens Valley      13ac</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6                                 13ad  Mono-Adobe Valleys      13ad</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                       L1_KEY Shape_Area       NAME</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 10  NORTH AMERICAN DESERTS  285751793 California</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 10  NORTH AMERICAN DESERTS  103496425 California</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 10  NORTH AMERICAN DESERTS 6613879510 California</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 10  NORTH AMERICAN DESERTS  449164266 California</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 10  NORTH AMERICAN DESERTS 1763113790 California</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 10  NORTH AMERICAN DESERTS  162895833 California</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                             geom</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 MULTIPOLYGON (((-118.694 37...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 MULTIPOLYGON (((-119.323 38...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 MULTIPOLYGON (((-119.845 38...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 MULTIPOLYGON (((-120.1395 3...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 MULTIPOLYGON (((-118.463 37...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 MULTIPOLYGON (((-118.7649 3...</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu">EcoregionBasedSample</span><span class="op">(</span><span class="va">polygon</span>, <span class="va">Weco</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>attribute variables are assumed to be spatially constant throughout all geometries</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>attribute variables are assumed to be spatially constant throughout all geometries</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">out</span><span class="op">$</span><span class="va">n</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 20</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span></span>
<span class="r-in"><span>   <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">out</span>, <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="EcoregionBasedSample-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span>  </span></span>
<span class="r-in"><span><span class="co"># This second example is from a recent publication by Morreno et al. 2022 and </span></span></span>
<span class="r-in"><span><span class="co"># presents biogeographic regions of the Neotropics and is available from a </span></span></span>
<span class="r-in"><span><span class="co"># google drive linked in the publication describing there creation located at</span></span></span>
<span class="r-in"><span><span class="co"># https://www.scielo.br/j/aabc/a/hPft4CK6RV8QBr8nP7bxhRQ/?lang=en#</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Essentially we showcase how a user can maintain this functions utility</span></span></span>
<span class="r-in"><span><span class="co"># while catering to data in a format differing from the Omernik L4 distribution. </span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">neo_eco</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_read.html" class="external-link">st_read</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>   <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span>package<span class="op">=</span><span class="st">"safeHavens"</span><span class="op">)</span>, <span class="st">'extdata'</span>, <span class="st">'NeoTropicsEcoregions.gpkg'</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    quiet <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">sp_range</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_polygon</a></span><span class="op">(</span> <span class="co"># complete</span></span></span>
<span class="r-in"><span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>   <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>     <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">80</span>,<span class="op">-</span><span class="fl">5</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">80</span>,<span class="fl">10</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">60</span>,<span class="fl">10</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">55</span>,<span class="fl">5</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>     <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">60</span>,<span class="op">-</span><span class="fl">5</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">80</span>,<span class="op">-</span><span class="fl">5</span><span class="op">)</span> </span></span>
<span class="r-in"><span>   <span class="op">)</span></span></span>
<span class="r-in"><span> <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span></span>
<span class="r-in"><span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_crs.html" class="external-link">st_set_crs</a></span><span class="op">(</span><span class="fl">4326</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>geometry <span class="op">=</span> <span class="va">x</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>Species <span class="op">=</span> <span class="st">'Da species'</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu">EcoregionBasedSample</span><span class="op">(</span><span class="va">sp_range</span>, <span class="va">neo_eco</span>, ecoregion_col <span class="op">=</span> <span class="st">'Provincias'</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>attribute variables are assumed to be spatially constant throughout all geometries</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>attribute variables are assumed to be spatially constant throughout all geometries</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">out</span><span class="op">$</span><span class="va">n</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 19</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span></span>
<span class="r-in"><span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">neo_eco</span><span class="op">)</span> <span class="op">+</span> </span></span>
<span class="r-in"><span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">out</span>, <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span></span>
<span class="r-in"><span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">sp_range</span>, fill <span class="op">=</span> <span class="cn">NA</span>, color <span class="op">=</span> <span class="st">'Red'</span><span class="op">)</span> </span></span>
<span class="r-plt img"><img src="EcoregionBasedSample-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Note that both of the files of the above ecoregions have had their geometry</span></span></span>
<span class="r-in"><span><span class="co"># simplified, i.e. made less complex - you should notice they look slightly angular</span></span></span>
<span class="r-in"><span><span class="co"># like an old cartoon such as Rugrats or so. We do this to reduce the file size</span></span></span>
<span class="r-in"><span><span class="co"># to make it easier to install the package, and reduce the run time of the functions</span></span></span>
<span class="r-in"><span><span class="co"># for these simple examples. </span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Reed Benkendorf.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

